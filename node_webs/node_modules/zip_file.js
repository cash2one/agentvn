//--------------------------------------------------------------------------------------------------------
// zip_file.js
//--------------------------------------------------------------------------------------------------------
var exec = require('child_process').exec
//--------------------------------------------------------------------------------------------------------
var zip_cmd = '7z'
var compress_cmd = zip_cmd + ' a'
//--------------------------------------------------------------------------------------------------------
exports.compress = function(zip_name, file, password, cb) {
    if (typeof(password) == 'function') {
        cb = password
    }

    var cmd = compress_cmd + ' ' + zip_name + ' ' + file

    if (typeof(password) == 'string') {
        cmd = cmd + ' -p' + password
    }

    exec(cmd, function(err, stdout, stderr) {
        if (cb) {
            cb(err, stdout, stderr)
        }
    })
}
//--------------------------------------------------------------------------------------------------------