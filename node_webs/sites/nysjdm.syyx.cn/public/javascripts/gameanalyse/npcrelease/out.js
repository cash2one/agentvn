$(document).ready(function(){$("#txtStartDate,#txtEndDate").datepicker({changeMonth:!0,changeYear:!0,dayNamesMin:"\u65e5,\u4e00,\u4e8c,\u4e09,\u56db,\u4e94,\u516d".split(","),dateFormat:"yy-mm-dd",monthNamesShort:"\u4e00\u6708,\u4e8c\u6708,\u4e09\u6708,\u56db\u6708,\u4e94\u6708,\u516d\u6708,\u4e03\u6708,\u516b\u6708,\u4e5d\u6708,\u5341\u6708,\u5341\u4e00\u6708,\u5341\u4e8c\u6708".split(","),yearRange:"-60:+00",maxDate:"+0d",duration:"fast"});$("#btnQuery").bind("click",function(){getNpcReleaseList()})});
function getNpcReleaseList(){var a="",h={},f=$("#txtStartDate").val(),i=$("#txtEndDate").val(),j=$("#NpcReleaseTypeList").children("option:selected").val();!f||""==f?$.messager.alert("\u63d0\u793a","<font color=red><b>\u67e5\u8be2\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a</b></font>","error"):!i||""==i?$.messager.alert("\u63d0\u793a","<font color=red><b>\u67e5\u8be2\u7ed3\u675f\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a</b></font>","error"):$.ajax({url:"http://nysjdm.syyx.cn/parameter/link_server_list?r="+
Math.random(),type:"get",dataType:"json",data:{},success:function(b){for(var k=b.rows.length,d=0;d<k;d++)1==b.rows[d].IsEnabled&&(a+="["+b.rows[d].ServerID+"],",h[b.rows[d].ServerID]=b.rows[d].Title);a=a.substring(0,a.length-1);$.ajax({url:"http://nysjdm.syyx.cn/gameanalyse/game_npcrelease_list?r="+Math.random(),type:"get",dataType:"json",data:{StartDate:f,EndDate:i,ServerList:a,TypeID:j},beforeSend:function(){$("#loading").show()},complete:function(){$("#loading").hide()},success:function(a){$("#tableNpcRelease thead").remove();
$("#tableNpcRelease tbody").remove();var c,e="<tbody>",d=a.rows.length;c="<thead><tr><th>\u65e5\u671f</th>";for(var g in a.rows[0])h[g]&&(c+="<th>"+h[g]+"</th>");$(c+"<th>\u5408\u8ba1</th></tr></thead>").appendTo("#tableNpcRelease");for(c=0;c<d;c++){g=0;var e=e+("<tr class='newrow'><td>"+a.rows[c].CreateDate+"</td>"),b;for(b in a.rows[0])if("CreateDate"!=b){var f="NULL"==a.rows[c][b]?0:a.rows[c][b];g+=f;e+="<td>"+f+"</td>"}e+="<td>"+g+"</td></tr>"}$(e+"</tbody>").appendTo("#tableNpcRelease")}})}})}
;
