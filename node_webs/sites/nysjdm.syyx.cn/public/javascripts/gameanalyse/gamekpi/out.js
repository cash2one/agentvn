$(document).ready(function(){$("#txtStartDate,#txtEndDate").datepicker({changeMonth:!0,changeYear:!0,dayNamesMin:"\u65e5,\u4e00,\u4e8c,\u4e09,\u56db,\u4e94,\u516d".split(","),dateFormat:"yy-mm-dd",monthNamesShort:"\u4e00\u6708,\u4e8c\u6708,\u4e09\u6708,\u56db\u6708,\u4e94\u6708,\u516d\u6708,\u4e03\u6708,\u516b\u6708,\u4e5d\u6708,\u5341\u6708,\u5341\u4e00\u6708,\u5341\u4e8c\u6708".split(","),yearRange:"-60:+00",maxDate:"+0d",duration:"fast"});getServerList();$("#btnQuery").bind("click",function(){get_gamekpi_list()})});
function getServerList(){$.ajax({url:"http://nysjdm.syyx.cn/parameter/link_server_viewlist?r="+Math.random(),type:"get",dataType:"json",data:{},beforeSend:function(){$("#loading").show()},complete:function(){$("#loading").hide()},success:function(c){$("#serverList").empty();$.each(c.rows,function(c,b){$('<option value="'+b.ServerID+'"> '+b.Title+"</option>").appendTo($("#serverList"))})}});$("#txtStartDate").val("");$("#txtEndDate").val("")}
function get_gamekpi_list(){var c=$("#serverList").children("option:selected").val(),d=$("#txtStartDate").val(),b=$("#txtEndDate").val();!d||""==d?$.messager.alert("\u63d0\u793a","<font color=red><b>\u67e5\u8be2\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a</b></font>","error"):!b||""==b?$.messager.alert("\u63d0\u793a","<font color=red><b>\u67e5\u8be2\u7ed3\u675f\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a</b></font>","error"):$.ajax({url:"http://nysjdm.syyx.cn/gameanalyse/game_kpi_list?r="+Math.random(),
type:"get",dataType:"json",data:{ServerID:c,StartDate:d,EndDate:b,ServerID:c},beforeSend:function(){$("#loading").show()},complete:function(){$("#loading").hide()},success:function(b){$("#tableGameKpi tbody").find("tr.newrow").remove();$.each(b.rows,function(b,a){$("<tr class='newrow'></tr>").append("<td>"+a.CreateDate+"</td><td>"+a.WorldBoss+"</td><td>"+a.Task004+"</td><td>"+a.Task003+"</td><td>"+a.Task033+"</td><td>"+a.Task015+"</td><td>"+a.Task014+"</td><td>"+a.StoneCreate107+"</td><td>"+a.StoneDestroy107+
"</td><td>"+a.StoneCreate108+"</td><td>"+a.StoneDestroy108+"</td><td>"+a.StoneCreate109+"</td><td>"+a.StoneDestroy109+"</td><td>"+a.SingleCreate1+"</td><td>"+a.SingleCreate2+"</td><td>"+a.SingleCreate3+"</td><td>"+a.BlueprintCreate6+"</td><td>"+a.BlueprintCreate7+"</td><td>"+a.BlueprintCreate8+"</td><td>"+a.BlueprintCreate9+"</td><td>"+a.BlueprintCreate10+"</td><td>"+a.GoldprintCreate+"</td>").appendTo($("#tableGameKpi tbody"))})}})};
