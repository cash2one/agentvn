$(document).ready(function(){$("#txtStartDate,#txtEndDate").datepicker({changeMonth:!0,changeYear:!0,dayNamesMin:"\u65e5,\u4e00,\u4e8c,\u4e09,\u56db,\u4e94,\u516d".split(","),dateFormat:"yy-mm-dd",monthNamesShort:"\u4e00\u6708,\u4e8c\u6708,\u4e09\u6708,\u56db\u6708,\u4e94\u6708,\u516d\u6708,\u4e03\u6708,\u516b\u6708,\u4e5d\u6708,\u5341\u6708,\u5341\u4e00\u6708,\u5341\u4e8c\u6708".split(","),yearRange:"-60:+00",maxDate:"+0d",duration:"fast"});getServerList();$("#btnQuery").bind("click",function(){getBattleList()})});
function getServerList(){$.ajax({url:"http://nysjdm.syyx.cn/parameter/link_server_viewlist?r="+Math.random(),type:"get",dataType:"json",data:{},beforeSend:function(){$("#loading").show()},complete:function(){$("#loading").hide()},success:function(d){$("#serverList").empty();$.each(d.rows,function(b,a){$('<option value="'+a.ServerID+'"> '+a.Title+"</option>").appendTo($("#serverList"))})}});$("#txtStartDate").val("");$("#txtEndDate").val("");$("#parttimeList").val(0);$("#txtLine").val(0)}
function getBattleList(){var d=$("#serverList").children("option:selected").val(),b=$("#txtStartDate").val(),a=$("#txtEndDate").val(),e=$("#parttimeList").children("option:selected").val(),c=$("#txtLine").val();if(!b||""==b)$.messager.alert("\u63d0\u793a","<font color=red><b>\u67e5\u8be2\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a</b></font>","error");else if(!a||""==a)$.messager.alert("\u63d0\u793a","<font color=red><b>\u67e5\u8be2\u7ed3\u675f\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a</b></font>",
"error");else{if(!c||""==c)c=0;$("#tableBattle").datagrid({url:"http://nysjdm.syyx.cn/gameanalyse/game_battle_list?&StartDate="+b+"&EndDate="+a+"&ServerID="+d+"&Line="+c+"&Flag="+e+"&r="+Math.random(),title:"\u6218\u573a\u7edf\u8ba1",width:800,fitColumns:!0,nowrap:!1,rownumbers:!0,singleSelect:!0,columns:[[{field:"CreateDate",title:"\u65e5\u671f",width:120,align:"center"},{field:"Numbers",title:"\u6240\u5f00\u573a\u6b21",width:80,align:"center"},{field:"Amounts",title:"\u5e73\u5747\u5355\u573a\u53c2\u4e0e\u4eba\u6570",
width:120,align:"center"}]]})}};
