function get_radio_server(){var a="<div class='serverlist_box'>";$.ajax({url:"http://nysjdm.syyx.cn/parameter/link_server_list?r="+Math.random(),type:"get",dataType:"json",data:{},beforeSend:function(){$("#loading").show()},complete:function(){$("#loading").hide()},success:function(c){$("#radioDetailList").empty();for(var e=c.rows.length,f={},d=0;d<e;d++)f[c.rows[d].PartName]?f[c.rows[d].PartName].push({Title:c.rows[d].Title,ServerID:c.rows[d].ServerID}):f[c.rows[d].PartName]=[{Title:c.rows[d].Title,
ServerID:c.rows[d].ServerID}];for(var g in f){a+="<div class='part_server'>";a+="<h1><font size='3' color='#9F5F9F'>"+g+"</font></h1>";a+="<div class='about_part'>";c=f[g].length;for(e=0;e<c;e++)d=f[g][e],a+="<input id='radioServer"+d.ServerID+"' name='radioServer' type='radio' value='"+d.ServerID+"'><span>"+d.Title+"</span></input>";a+="</div></div>"}a+="</div>";$(a).appendTo("#radioDetailList");$("#radioserverList").dialog({buttons:[{text:"\u786e\u5b9a",iconCls:"icon-ok",handler:function(){close_window()}}]})}})}
function close_window(){$("#radioserverList").window("close")}function show_window(){$("#radioserverList").window("open")}function get_server_value(){if(document.getElementById("rdAll").checked)return 0;var a=$('input:radio[name="radioServer"]:checked').val(),c=$('input:radio[name="radioServer"]:checked + span').text();if(null==a)return-1;$("#hiddenServerName").val(c);return a};$(document).ready(function(){$("#divserverTip").addClass("displaynone");$("#txtStatDate").datepicker({changeMonth:!0,changeYear:!0,dayNamesMin:"\u65e5,\u4e00,\u4e8c,\u4e09,\u56db,\u4e94,\u516d".split(","),dateFormat:"yy-mm-dd",monthNamesShort:"\u4e00\u6708,\u4e8c\u6708,\u4e09\u6708,\u56db\u6708,\u4e94\u6708,\u516d\u6708,\u4e03\u6708,\u516b\u6708,\u4e5d\u6708,\u5341\u6708,\u5341\u4e00\u6708,\u5341\u4e8c\u6708".split(","),yearRange:"-60:+00",maxDate:"+0d",duration:"fast"});$("#txtEndDate").datepicker({changeMonth:!0,
changeYear:!0,dayNamesMin:"\u65e5,\u4e00,\u4e8c,\u4e09,\u56db,\u4e94,\u516d".split(","),dateFormat:"yy-mm-dd",monthNamesShort:"\u4e00\u6708,\u4e8c\u6708,\u4e09\u6708,\u56db\u6708,\u4e94\u6708,\u516d\u6708,\u4e03\u6708,\u516b\u6708,\u4e5d\u6708,\u5341\u6708,\u5341\u4e00\u6708,\u5341\u4e8c\u6708".split(","),yearRange:"-60:+00",maxDate:"+0d",duration:"fast"});getServerList();$("#btnQuery").bind("click",function(){get_ratenew_list()});$("#rdCus").click(function(){get_radio_server()})});
function getServerList(){$.ajax({url:"http://nysjdm.syyx.cn/parameter/link_server_viewlist?r="+Math.random(),type:"get",dataType:"json",data:{},beforeSend:function(){$("#loading").show()},complete:function(){$("#loading").hide()},success:function(a){$("#serverList").empty();$('<option value="0">\u5168\u670d</option>').appendTo($("#serverList"));$.each(a.rows,function(a,e){$('<option value="'+e.ServerID+'"> '+e.Title+"</option>").appendTo($("#serverList"))})}});$("#txtStatDate").val("");$("#txtEndDate").val("");
$("input[name=server]").get(0).checked=!0}
function get_ratenew_list(){var a=get_server_value(),c="",e=$("#txtStatDate").val(),f=$("#txtEndDate").val(),c=0==a?"\u5168\u670d":-1==a?"\u672a\u9009\u62e9\u670d\u52a1\u5668":$("#hiddenServerName").val();$("#divserverTip").removeClass("displaynone").empty();$('<span class="tip_icon"></span><lable>\u670d\u52a1\u5668\uff1a'+c+"</lable>").appendTo("#divserverTip");!e||""==e?$.messager.alert("\u63d0\u793a","<font color=red><b>\u67e5\u8be2\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a</b></font>","error"):
!f||""==f?$.messager.alert("\u63d0\u793a","<font color=red><b>\u67e5\u8be2\u7ed3\u675f\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a</b></font>","error"):$.ajax({url:"http://nysjdm.syyx.cn/opanalyse/login_ratenew_list?r="+Math.random(),type:"get",dataType:"json",data:{StartDate:e,EndDate:f,ServerID:a},beforeSend:function(){$("#loading").show()},complete:function(){$("#loading").hide()},success:function(a){$("#tableOpLoginRateNew tbody").find("tr.newrow").remove();$.each(a.rows,function(a,b){$("<tr class='newrow'></tr>").append("<td>"+
b.CreateDate+"</td><td>"+b.Logins+"</td><td>"+b.Rate1+"</td><td>"+b.Rate2+"</td><td>"+b.Rate3+"</td><td>"+b.Rate4+"</td><td>"+b.Rate5+"</td><td>"+b.Rate6+"</td><td>"+b.Rate7+"</td><td>"+b.Rate1_7+"</td><td>"+b.Rate27+"</td><td>"+b.Rate28+"</td><td>"+b.Rate29+"</td><td>"+b.Rate57+"</td><td>"+b.Rate58+"</td><td>"+b.Rate59+"</td>").appendTo($("#tableOpLoginRateNew tbody"))})}})};
