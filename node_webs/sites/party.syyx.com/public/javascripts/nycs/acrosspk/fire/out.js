var enter,war,enter_data=!1,war_data=!1,check=0;function date2html(c){var b=c.length;6<b&&(b=6);for(var a="",e=0;e<b;e++)var d=c[e].AddDate.split("-"),a=a+("<a>"+d[0]+"\u5e74"+d[1]+"\u6708</a>");$("#time_box").html(a);dateevent()}function html2date(c){c=c.split("\u5e74");return c[0]+"-"+c[1].replace("\u6708","")}function date2serch(c){var b=c.split("-");return"?startdate="+c+"-1&enddate="+b[0]+"-"+(b[1]-0+1)+"-1"}
function dateevent(){$("#view_time span").eq(0).unbind("click");$("#view_time span").eq(0).click(function(){if(""!=$("#time_box").html()){$("#time_box").fadeIn("fast",function(){$(document).one("click",function(a){a.stopPropagation();$("#time_box").fadeOut("fast")})});for(var c=$("#time_box a").length,b=0;b<c;b++)$("#time_box a").eq(b).click(function(){$("#view_time span").eq(0).html()!=$(this).html()&&($("#view_time span").eq(0).html($(this).html()),$("#time_box").fadeOut("fast"),show_enter(html2date($(this).html())),
show_war(html2date($(this).html())))})}})}function cycle(c,b){var a=""==c?"":c[0].AddDate,e=""==b?"":b[0].AddDate;tab_event();if(a>e||""==e)$("#tab_charts span").eq(1).addClass("check_1"),$(".tbl_2").fadeIn("fast"),$(".tbl_1").css("display","none"),date2html(enter),show_war(a),show_enter(a),check=1;else if(a<=e||""==a)$("#tab_charts span").eq(0).addClass("check_0"),$(".tbl_2").css("display","none"),$(".tbl_1").fadeIn("fast"),date2html(war),show_war(e),show_enter(e),check=0}
function show_enter(c){var b=c.split("-");$("#view_time span").eq(0).html(b[0]+"\u5e74"+b[1]+"\u6708");$(".g_title").html("");$(".g_name").html("");$(".vs_title").html("");$(".vs_name").html("");$.get("/nycs/acrosspk/firelist"+date2serch(c),function(a){if(""!=a){enter_data=!0;1==check&&($(".tbl_3").css("display","none"),$(".tbl_2").fadeIn("fast"));var c=a.length;$("#enter").html("");for(var d=0;d<c;d++){var b=a[d].TableNo;15==b?($("#pk"+a[d].PKRound+" .g_"+(2*b-1)+" .vs_title").html(a[d].LeftName.replace(/undefined|null/,
"")),$("#pk"+a[d].PKRound+" .g_"+(2*b-1)+" .vs_name").html(a[d].LeftServerName.replace(/undefined|null/,"")),$("#pk"+a[d].PKRound+" .g_"+2*b+" .vs_title").html(a[d].RightName.replace(/undefined|null/,"")),$("#pk"+a[d].PKRound+" .g_"+2*b+" .vs_name").html(a[d].RightServerName.replace(/undefined|null/,""))):($("#pk"+a[d].PKRound+" .g_"+(2*b-1)+" .g_title").html(a[d].LeftName.replace(/undefined|null/,"")),$("#pk"+a[d].PKRound+" .g_"+(2*b-1)+" .g_name").html(a[d].LeftServerName.replace(/undefined|null/,
"")),$("#pk"+a[d].PKRound+" .g_"+2*b+" .g_title").html(a[d].RightName.replace(/undefined|null/,"")),$("#pk"+a[d].PKRound+" .g_"+2*b+" .g_name").html(a[d].RightServerName.replace(/undefined|null/,"")))}}else enter_data=!1},"json")}
function show_war(c){var b=c.split("-");$("#view_time span").eq(0).html(b[0]+"\u5e74"+b[1]+"\u6708");$("#war").html("");$.get("/nycs/acrosspk/fireranklist"+date2serch(c),function(a){if(""!=a){war_data=!0;0==check&&($(".tbl_3").css("display","none"),$(".tbl_1").fadeIn("fast"));for(var b=a.length,c=["","69\u7ea7\u7ec4","79\u7ea7\u7ec4","89\u7ea7\u7ec4","99\u7ea7\u7ec4"],g="",f=0;f<b;f++)g+="<tr><td>"+c[a[f].PKRound]+"</td><td><div class='gold'>"+a[f].FirstGroupName.replace(/undefined|null/,"")+"</div></td><td>"+
a[f].ServerName.replace(/undefined|null/,"")+"</td><td>"+a[f].UserName.replace(/undefined|null/,"")+"</td></tr>";$("#war").html(g)}else war_data=!1},"json")}
function tab_event(){$("#tab_charts span").eq(0).click(function(){check=0;$("#tab_charts span").eq(1).removeClass("check_1");$(this).addClass("check_0");$(".tbl_2").css("display","none");$(".tbl_3").css("display","none");!0==war_data?$(".tbl_1").fadeIn("fast"):$(".tbl_3").fadeIn("fast");date2html(war)});$("#tab_charts span").eq(1).click(function(){check=1;$("#tab_charts span").eq(0).removeClass("check_0");$(this).addClass("check_1");$(".tbl_1").css("display","none");$(".tbl_3").css("display","none");
!0==enter_data?$(".tbl_2").fadeIn("fast"):$(".tbl_3").fadeIn("fast");date2html(enter)})}
!function(){$("#tab_match a").eq(0).mouseover(function(){$("#tab_match a").eq(0).addClass("tab_0");$("#tab_match a").eq(1).removeClass()});$("#tab_match a").eq(0).mouseout(function(){$("#tab_match a").eq(1).addClass("tab_1");$("#tab_match a").eq(0).removeClass()});$.get("/nycs/acrosspk/firecycle",function(c){$.get("/nycs/acrosspk/firerankcycle",function(b){""==c&&""==b?($(".tbl_3").fadeIn("fast"),$("#view_time span").eq(0).html("\u6682\u65e0\u6570\u636e")):(enter=c,war=b,cycle(c,b))},"json")},"json");
$("a").attr("hidefocus","true")}();
